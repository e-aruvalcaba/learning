window.start=this;var Total,obj,canvasContenido,SCORE,OS,visibleSim,visibleVid,validar_control,validar_shift,btnAtras,btnSiguiente,btnMenu,btnEval,btnHome,btnCerrar,NombreCurso="ARCA_CONTINENTAL_TMR_ANIMATECC",termino=!1,banderillas=!1,Rutas=new Array,Pag=new Array,PagTotal=0,currentPagina=0,TRAK=new Array,NombreModulos=new Array,Modulos=new Array,menu_open=!1,bussy=!1,TRAKtmp=new Array,Evals=new Array,ULTIMO=null,ONLINE=!1,xmlGlosario="xml/glosario.xml",IDActual=0,URLactual=window.location,_root=window.parent,timeline=0,contador=0,estadoMenu=!1,terminado=!1,LastMCVid=!1,VidLast=!1,estadoSim=!1,iOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,oportunidades=0,intentoAct=0,califMinima=0,backdoor=!1,clave_backdoor="123",clave_TerminarTema="qwe",clave_eval="asd",clave_borrar="zxc",Glosario_gpo=new Array,Glosario_pal=new Array,Glosario_desc=new Array,pagActual=0,numPags=0,controlAtras=!1,NumPreguntas=0,checkboxText="",controlEvalArray=0,controlIrUltimo=!1,contControlCheckbox=0,EdoBtns={btnAtras:!0,btnSiguiente:!0,btnMenu:!0,btnEval:!0,btnCerrar:!0,btnHome:!0,barra:!0},Temaslibre=!0,btnArray=[],libre=!1,tl=new TimelineMax,debug=!1,myVar=setInterval(myTimer,20);function alertas(a,e){switch(a){case 1:mostrarSiguiente(e=""===e||null==e||NaN===e?"Actividad Completada. Presione Siguiente para continuar...":e);break;case 2:mostrarTemaCompletado(e=""===e||null==e||NaN===e?"Tema Completado. Presione Siguiente para continuar...":e)}}function inicializaMensajes(){(tl=new TimelineMax({repeat:0,onComplete:stopAlertas})).from($("#mensajesHTML"),1,{opacity:0,left:"400px"}),tl.to($("#mensajesHTML"),1,{opacity:0,left:"400px",delay:5})}function stopAlertas(){tl.pause(),$("#alertasContainer").hasClass("siguiente")&&$("#alertasContainer").removeClass("siguiente"),$("#alertasContainer").hasClass("completado")&&$("#alertasContainer").removeClass("completado"),$("#mensajesHTML").css("display","none")}function mostrarSiguiente(a){$("#alertasContainer").addClass("siguiente"),$("#mensajesHTML").css("display","inline-block"),$("#alertasContainer").html(a),tl.restart()}function mostrarTemaCompletado(a){$("#alertasContainer").addClass("completado"),$("#mensajesHTML").css("display","inline-block"),$("#alertasContainer").html(a),tl.restart()}function populateMenu(a){let e=[0,3,8,11,18,20],t=0;for(let n=0;n<a.Modulos.length;n++)for(let o=0;o<a.Modulos[n]["Mod"+(n+1)].length;o++)id=t,-1!==e.indexOf(o)?$("#temasContainer").append("<div id='"+(t+1)+"' onclick='llamarTema("+t+")' onmouseover='rollover("+(t+1)+")' onmouseout='rollout("+(t+1)+")' class='col-xs-12 tituloTemaMenu'><div class='col-xs-1' style='padding-top: 8px; padding-left:0px; padding-right:0px;'><a><i class='fas fa-circle menuIconStyle'></i></a></div><div class='col-xs-8' style='color:white; margin: 0px;padding-top: 7px; padding-left:0px;'><p class='reset' style='float: left; padding-top: 3px; padding-left: 0px; pointer-events:none; text-align:left'>"+a.Modulos[n]["Mod"+(n+1)][o]+"</p></div></div>"):$("#temasContainer").append("<div id='"+(t+1)+"' style='padding-left: 30px;' onclick='llamarTema("+t+")' onmouseover='rollover("+(t+1)+")' onmouseout='rollout("+(t+1)+")' class='col-xs-12 tituloTemaMenu'><div class='col-xs-1' style='padding-top: 8px;'><a><i class='fas fa-circle menuIconStyle'></i></a></div><div class='col-xs-8' style='color:white; margin: 0px;padding-top: 7px; padding-left:0px;'><p class='reset' style='float: left; padding-top: 3px; padding-left: 0px; pointer-events:none; text-align:left'>"+a.Modulos[n]["Mod"+(n+1)][o]+"</p></div></div>"),t++,debug&&console.log(a.Modulos[n]["Mod"+(n+1)][o])}function habilitarEvals(a){for(let e=0;e<Evals.length;e++)Evals[e].Modulo==a&&$("#Evaluacion"+(a+1)).hasClass("menuTemaDisabled")&&$("#Evaluacion"+(a+1)).removeClass("menuTemaDisabled").addClass("menuTemaDesbloqueado")}function rollover(a){}function rollout(a){}function llamarTema(a){ir(a),llamar_menuHTML()}function llamarEval(a){var e=document.getElementById("Contenido");debug&&console.log("temas/"+obj.NombreEval+".html"),e.src="temas/"+obj.NombreEval+".html",terminado=!0,e.onload=function(){$("#div_contenido").fadeIn()},llamar_menuHTML()}window.onresize=function(){debug&&(console.log("--------------------------------------"),console.log($("#menuHTML").height())),$("#menuHTML").height($("#div_contenido").height()-30),$("#temasContainer").height($("#menuHTML").height()-100),$("#barraInferior").width($("#div_contenido").width()),$("#mensajesHTML").width($("#div_contenido").width()),$("#ultimoContainer").width($("#div_contenido").width());let a=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-$("#content").height();$("#content").css("margin-top",(a/2).toString()+"px")};var getBrowserInfo=function(){var a,e=navigator.userAgent,t=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(t[1])?"IE "+((a=/\brv[ :]+(\d+)/g.exec(e)||[])[1]||""):"Chrome"===t[1]&&null!=(a=e.match(/\b(OPR|Edge)\/(\d+)/))?a.slice(1).join(" ").replace("OPR","Opera"):(t=t[2]?[t[1],t[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(a=e.match(/version\/(\d+)/i))&&t.splice(1,1,a[1]),t.join(" "))};function initialize(){setTimeout(inicializar,2e3),setTimeout(function(){clearInterval(myVar)},1999)}function myTimer(){document.getElementById("loaderText").innerHTML="Cargando <br /> <br /> "+contador+"%",contador<100&&contador++}function inicializar(a){$("#loader-wrappler").remove(),window.clearInterval(a),InitApi()}function InitApi(){debug&&console.log("------Inicializacion------"),getAPI(),IdentificarEstado(),document.getElementById("menuHTML").style.height=document.getElementById("div_contenido").style.height-30+"px",$("#menuHTML").height($("#div_contenido").height()-30),$("#ultimoContainer").width($("#div_contenido").width()+3);let a=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-$("#content").height();$("#content").css("margin-top",(a/2).toString()+"px")}function IdentificarEstado(){debug&&console.log("------Identificado la Ejecucion del Curso------"),0==String(URLactual).indexOf("http://localhost")?(leeLocal(),ONLINE=!1):0==String(URLactual).indexOf("http")?(leeOnline(),ONLINE=!0,new_nswf_DoFSCommand("getParam","")):(leeLocal(),ONLINE=!1)}function initConfig(a){debug&&console.log("numero de modulos:"+a.Modulos.length/2);a.Modulos.length;for(let t=0;t<a.Rutas.length;t++)for(var e=0;e<a.Rutas[t]["Rut"+(t+1)].length;e++)Rutas.push(a.Rutas[t]["Rut"+(t+1)][e]),0;Total=Rutas.length,TotalArchivos=Rutas.length,debug&&(console.log("Dato de las rutas: "),console.log(Rutas),console.log("json trak es:  "+a.Trak)),initbarra(a),$("#NombreDelCurso").html(a.NombreCurso),(ULTIMO>0||0===ULTIMO&&2==TRAK[0])&&mostrarUltimo()}function llamarRetros(){}function actualizaTemasTerminados(){let a=currentPagina+"/"+PagTotal;return actualizarProgressBarCDI(),$("#numTemasCompletados").html(a)}function actualizarProgressBar(){}function actualizarProgressBarCDI(){let a=100*currentPagina/PagTotal;$("#progressBar").css("width",a+"%"),$("#percent").html(a.toFixed(0)+"%")}function leeLocal(){debug&&console.log("lee local");var a=leeLocalStorage();null==a||""==a?(debug&&console.log("No existe un Informacion"),obj=$.parseJSON(ConfigurationJson)):(debug&&console.log("Ya existe Informacion"),obj=$.parseJSON(a)),debug&&(console.log("Asignacion de valores"),console.log(JSON.stringify(obj))),setValues(obj),initConfig(obj),cargarPortada()}function setValues(a){if(ULTIMO=a.Ultimo,oportunidades=a.Evaluaciones[0].MaxIntentos,intentoAct=a.Evaluaciones[0].IntentoActual,SCORE=a.Evaluaciones[0].CalActual,califMinima=a.Evaluaciones[0].CalMinima,0===(TRAK=a.Trak).length||null==TRAK||NaN===TRAK)for(let e=0;e<a.Pag.length;e++)TRAK.push(0);Pag=a.Pag,libre=a.Libre,NombreModulos=a.NombreModulos,Modulos=a.Modulos,Evals=a.Evaluaciones;for(let e=0;e<a.Pag.length;e++)PagTotal+=parseInt(a.Pag[e])}function setObject(){obj.Trak=TRAK,obj.Ultimo=ULTIMO,obj.Evaluaciones[0].CalActual=SCORE,obj.Evaluaciones[0].MaxIntentos=oportunidades,obj.Evaluaciones[0].IntentoActual=intentoAct,obj.Evaluaciones[0].CalMinima=califMinima,obj.Libre=libre}function leeLocalStorage(){var a;try{"IE"==getBrowserInfo().split(" ")[0]?(debug&&console.log("leyendo cookie"),a=-1===document.cookie.indexOf("data=")?"":("; "+document.cookie).split("; data=")[1].split(";")[0]):(debug&&console.log("leyendo LocalStorage"),a=window.localStorage.getItem(NombreCurso))}catch(a){console.log("error al leer local storage:"+a.text)}return a}function guardaLocalStorage(a){try{if("IE"==getBrowserInfo().split(" ")[0]){debug&&console.log("se guarda en cookie");var e=new Date;e.setFullYear(e.getFullYear()+1),document.cookie="data="+JSON.stringify(a)+"; expires="+e.toGMTString()}else debug&&console.log("se guarda en LocalStorage"),window.localStorage.setItem(NombreCurso,JSON.stringify(a))}catch(a){console.log("no pudo guardar archivos en local storage:"+a.text)}}function imprimirIframe(){debug&&console.log("imprime"),window.frames.Contenido.focus(),window.frames.Contenido.print()}function leeOnline(){if(debug&&(console.log("LEE ONLINE"),console.log("regresoLMS "+regresoLMS)),regresoLMS=ComunicacionLMS("leer"),""==regresoLMS||null==regresoLMS)debug&&console.log("suspent data vacio, generando json"),obj=$.parseJSON(ConfigurationJson);else{debug&&console.log("suspend data diferente a vacio");var a=regresoLMS;obj=$.parseJSON(a)}debug&&console.log(obj),setValues(obj),initConfig(obj),cargarPortada()}function guardarDatos(){if(setObject(),ONLINE){debug&&(console.log("guardando datos online"),console.log("json-generando"));var a=JSON.stringify(obj);ComunicacionLMS("guardar",a)}else debug&&console.log("guardando datos local"),guardaLocalStorage(obj)}function limpiarContenido(){debug&&console.log("**********************limpiarContenido"),document.getElementById("Contenido").src="*"}function ir(a){menu_open&&llamar_menuHTML(),debug&&(console.log("********",ULTIMO,a,TRAK[a]),console.log("**********************IR"),console.log("ir "+a)),limpiarContenido();let e=document.getElementById("Contenido");e.src=Rutas[a],e.onload=function(){$("#div_contenido").fadeIn()},_root.IDActual=a,recalcularPaginaActual(a),debug&&console.log("IDActual: ",_root.IDActual," ULTIMO: ",_root.ULTIMO),canvasContenido&&reset_navegacion(canvasContenido.timeline.position,canvasContenido.timeline.duration),actualizaTemasTerminados()}function recalcularPaginaActual(a){let e=1;for(let t=0;t<a;t++)e+=parseInt(Pag[t]);currentPagina=e}function iniciar_tema(a){try{if(debug&&console.log("inicio_tema",_root.IDActual),getCanvas(a),actualizarNavegacion(canvasContenido.timeline.position,canvasContenido.timeline.duration),TRAK[IDActual]<1&&(TRAK[IDActual]=1),controlIrUltimo){debug&&console.log("llendo a la ultima pagina desde reset_navegacion");let a=obtenerFramePorPagina(_root.ULTIMO);console.log("Frame al que navegara: "+a[1]),canvasContenido.gotoAndPlay(a[1]),controlIrUltimo=!1}if(controlAtras){debug&&console.log("entro a control atras");let a=canvasContenido.timeline.duration;canvasContenido.gotoAndPlay(a),controlAtras=!1}0!==IDActual&&(_root.ULTIMO=_root.currentPagina),guardarDatos(),debug&&console.log("fin inicio tema")}catch(a){debug&&console.warn("Error iniciando tema: "+a)}actualizar_menuHTML(TRAK),reset_navegacion(canvasContenido.timeline.position,canvasContenido.timeline.duration)}function obtenerFramePorPagina(a){let e=0,t=0;for(let n=0;n<obj.Pag.length;n++){if(e+=parseInt(obj.Pag[n]),a>=t&&a<=e){let e=[];return e[0]=n,e[1]=a-t,e}t=e}}function final_tema(){debug&&console.log("*********************FINAL TEMA",_root.IDActual),TRAK[IDActual]<2&&(TRAK[IDActual]=2),IDActual>0&&(_root.ULTIMO=_root.currentPagina),debug&&console.log(_root.ULTIMO,_root.IDActual,TRAK,TRAK[_root.IDActual]),habilitar_deshabilitar_btns(getBtnArray(btnSiguiente),"h","final_tema"),actualizar_menuHTML(TRAK),guardarDatos(),actualizarProgressBar(),banderillas&&alertas(2,"Tema Completo. Haz Clic en Siguiente para continuar."),console.log(" Curso Completado "+cursoCompletado())}function retrasar_final_tema(a){debug&&console.log("*********************FINAL TEMA",_root.IDActual+" retrasado por "+a),"number"!=typeof a&&(a=a>0?a:1,setTimeout(final_tema,1e3*a))}function retrasar_habilitar_siguiente(a){debug&&console.log("-habilitar siguiente retrasado por "+a),"number"!=typeof a&&(a=a>0?a:1,setTimeout(habilitarSiguiente,1e3*a))}function glosarioX(){document.getElementById("glosario").src="temas/"+obj.NombreIntro+".html",document.getElementById("btnGlos").click()}function irUltimo(){ir(obtenerFramePorPagina(ULTIMO)[0]),controlIrUltimo=!0,cerrarUltimo(),currentPagina=ULTIMO,actualizaTemasTerminados()}function cerrarUltimo(){$("#ultimoContainer").css("display","none")}function mostrarUltimo(){$("#ultimoContainer").css("display","block"),TweenLite.from($("#ultimoContainer"),1,{opacity:0})}function Cierra(){$("#Palabra").hide()}function simFinalizada(){debug&&console.log("termina la simulacion"),canvasBarra.habilitar_cerrar()}function Cierra_Sim(){0==estadoSim?llamarAlertas("Exit"):(debug&&console.log("cierra sim"),$("#div_sim").hide(),$("#div_vid").hide(),$("#div_contenido").fadeIn(),limpiarSim(),canvasBarra.habilitar_atras(),canvasBarra.cambio_cerrar(0),getEdo_botones(),VidLast&&(LastMCVid?(siguiente_verde(),final_tema()):siguiente_naranja()),LastMCVid=!1,VidLast=!1)}function checarTerminacion(){for(var a=0,e=2*TRAK.length,t=0;t<TRAK.length;t++)a+=TRAK[t];debug&&console.log("creditosMinimos: "+e+"\ncreditosActuales: "+a),e==a?(debug&&console.log("El curso ya fue terminado, Evaluacion Desbloqueada"),canvasBarra.habilitar_eval(),termino=!0):(backdoor||(debug&&console.log("un no se ve todo el curso, Evaluacion Bloqueada"),canvasBarra.deshabilitar_eval()),debug&&console.log("el backdoor esta activo, Evaluacion Desbloqueada"),canvasBarra.habilitar_eval())}function limpiarSim(){debug&&console.log("limpiarSim"),estadoSim=!1,document.getElementById("sim").src="",document.getElementById("vid").src=""}function getCanvas(a){debug&&console.log("Obtener Canvas"),canvasContenido=a}function llamar_menuHTML(){if(!bussy)if(menu_open){TweenLite.to($("#menuHTML"),.3,{opacity:0,top:"1400px"}),bussy=!1,setMenuBlur(!1);let a=new Array;!EdoBtns.btnAtras&&currentPagina>1&&a.push(btnAtras),EdoBtns.btnSiguiente||a.push(btnSiguiente),habilitar_deshabilitar_btns(a,"h","llamar_menu"),setTimeout(function(){this.menu_open=!1,$("#menuHTML").removeClass("menu-open"),$("#btnMenu").css("pointer-events","all"),TweenLite.to($("#menuHTML"),.01,{opacity:1,top:"0px"}),bussy=!1},300)}else $("#menuHTML").addClass("menu-open"),TweenLite.from($("#menuHTML"),.3,{opacity:0,top:"1400px"}),this.menu_open=!0,setMenuBlur(!0),habilitar_deshabilitar_btns(getBtnArray(btnAtras,btnSiguiente),"d","llamar_menu");window.onresize(),actualizar_menuHTML(TRAK),limpiarSim()}function setMenuBlur(a){try{var e=document.getElementById("Contenido").contentWindow.document.querySelector("canvas");let t="blur(0px)";switch(a){case!0:t="blur(5px)";break;default:t=""}e.style.filter=t}catch(a){console.log("Error tratando de aplicar blur. Error: "+a)}}function llamar_Portada(){$("#div_sim").hide(),$("#div_vid").hide(),$("#div_contenido").fadeIn(),document.getElementById("Contenido").src="temas/"+obj.NombreIntro+".html",limpiarSim()}function preload(){$("#div_loader").fadeIn(),$("#div_contenido").fadeIn()}function cargarPortada(){debug&&console.log("cargar portada");document.getElementById("Contenido");debug&&console.log("temas/"+obj.NombreIntro+".html"),$("#div_sim").hide(),$("#div_vid").hide(),limpiarSim(),ir(0)}function actualizarMenu(){var a=0,e=0;debug&&console.log("Actualizar menu "+TRAK);for(var t=0;t<Total;t++)if(e=TRAK[t],debug&&console.log("ESTADO DE TEMAS "+TRAK[t],e),1==e?(debug&&console.log(t,1),canvasMenu.cambioEdo(t,1,!0)):2==e?(a++,debug&&console.log(t,2,a),canvasMenu.cambioEdo(t,2,!0)):(debug&&console.log("no entro a ninguno de los anteriores "+t),canvasMenu.cambioEdo(t,0,!1)),2==e&&0==TRAK[t+1]){canvasMenu.cambioEdo(t+1,0,!0);break}a>=Total&&oportunidades<3||backdoor?this.habilitar_deshabilitar_btns(getBtnArray(btnEval),"h","actualizar_menu"):(this.habilitar_deshabilitar_btns(getBtnArray(btnEval),"d","actualizar_menu"),debug&&console.log("No se ha completado el curso",a,Total,terminado))}function saltar_intro(){llamar_menu(),cargarBarra(),$("#div_contenido").hide(),_root.ULTIMO}function validarbackdoor(){0==backdoor?(llamarAlertas("desbloqueado"),console.log("el backdoor esta:"+backdoor)):(llamarAlertas("bloqueado"),console.log("el backdoor esta:"+backdoor))}function borrarprogreso(){console.log("borrando"),setValues(obj=$.parseJSON(ConfigurationJson)),initConfig(obj),guardarDatos(),actualizarMenu(),cargarBarra(),llamar_menu()}function getPreguntas(){console.log("NumPreguntas desde start:"+canvasContenido.mc_eval.timeline.duration),NumPreguntas=canvasContenido.mc_eval.timeline.duration,console.log("el numero de preguntas es:"+NumPreguntas)}function initbarra(a){btnAtras=document.getElementById("btnAtras"),btnSiguiente=document.getElementById("btnSiguiente"),btnMenu=document.getElementById("btnMenu"),btnEval=document.getElementById("btnEval"),btnHome=document.getElementById("btnHome"),btnCerrar=document.getElementById("btnCerrar"),habilitar_deshabilitar_btns(getBtnArray(btnSiguiente,btnAtras),"d","initbarra"),cursoCompletado(),actualizaTemasTerminados(),actualizarProgressBar(70),populateMenu(a),inicializaMensajes()}function home(){$("#div_contenido").fadeIn(),llamar_Portada()}function cerrar(){Cierra_Sim()}function habilitar_deshabilitar_btns(a,e,t){if("d"===e||"h"===e)if(0!=a.length){name="disabledButton";for(let t=0;t<a.length;t++)"d"===e?$("#"+a[t].id.toString()).addClass(name):$("#"+a[t].id.toString()).removeClass(name);actualizarEdoBotones(),debug&&console.log("Nuevo edo de botones: "),debug&&console.log(this.EdoBtns)}else debug&&console.error("Funcion habilitar_deshabilitar_btns:Se enviaron 0 elementos en el array de botones. Llamdo desde funcion: "+t);else debug&&console.error("Funcion habilitar_deshabilitar_btns:No se enviaron los parametros de habilitar o habilitar correctamente. Llamdo desde funcion: "+t)}function habilitarSiguiente(){habilitar_deshabilitar_btns(getBtnArray(btnSiguiente),"h","habilitarSiguiente"),banderillas&&alertas(1,"Da clic en siguiente para continuar.")}function habilitarAtras(){habilitar_deshabilitar_btns(getBtnArray(btnAtras),"h","habilitarAtras")}function deshabilitarSiguiente(){habilitar_deshabilitar_btns(getBtnArray(btnSiguiente),"d","deshabilitarSiguiente")}function deshabilitarAtras(){habilitar_deshabilitar_btns(getBtnArray(btnAtras),"d","deshabilitaratras")}function actualizarEdoBotones(){this.EdoBtns.btnAtras=!(this.btnAtras.className.indexOf("disabledButton")>=0),this.EdoBtns.btnSiguiente=!(this.btnSiguiente.className.indexOf("disabledButton")>=0),this.EdoBtns.btnMenu=!(this.btnMenu.className.indexOf("disabledButton")>=0)}function getBtnArray(a,e,t,n,o,i){let r=[a,e,t,n,o,i];this.btnArray=[];for(let a=0;a<5;a++)null!=r[a]&&null!=r[a]&&this.btnArray.push(r[a]);return this.btnArray}function bloquear_barra(a){switch(a){case"d":if(!1===this.EdoBtns.barra)return;habilitar_deshabilitar_btns(getBtnArray(this.btnAtras,this.btnSiguiente,this.btnEval,this.btnHome,this.btnCerrar,this.btnMenu),a,"bloquear_barra"),this.EdoBtns.barra=!1;break;case"h":if(!0===this.EdoBtns.barra)return;habilitar_deshabilitar_btns(getBtnArray(this.btnAtras,this.btnSiguiente,this.btnEval,this.btnHome,this.btnCerrar,this.btnMenu),a,"bloquear_barra"),this.EdoBtns.barra=!1,this.EdoBtns.barra=!0;break;default:return void(debug&&console.warn("El parametro de entrada para bloquear/Desbloquer barra es incorrecto, solo se acepta 'd' para deshabilitar o 'h' para habilitar."))}}function habilitar_deshabilitar_eval(a){switch(this.libre&&habilitar_deshabilitar_btns(getBtnArray(btnEval),"d","habilitar_deshabilitar_eval"),a){case"d":if(!1===this.EdoBtns.btnEval)return;habilitar_deshabilitar_btns(getBtnArray(btnEval),"d","habilitar_deshabilitar_eval");break;case"d":if(!0===this.EdoBtns.btnEval)return;habilitar_deshabilitar_btns(getBtnArray(btnEval),"h","habilitar_deshabilitar_eval")}}function siguiente_frame(){$("#div_sim").show()&&($("#div_sim").hide(),limpiarSim()),pagActual<numPags-1?(paginaSiguiente(),ULTIMO=currentPagina+=1):siguienteTema(),reset_navegacion(canvasContenido.timeline.position,canvasContenido.timeline.duration),actualizaTemasTerminados()}function anterior_frame(){pagActual>0?(canvasContenido.gotoAndStop(pagActual-1),ULTIMO=currentPagina-=1):IDActual>0&&temaAnterior(),reset_navegacion(canvasContenido.timeline.position,canvasContenido.timeline.duration),actualizaTemasTerminados()}function paginaSiguiente(){pagActual+=1,canvasContenido.gotoAndStop(pagActual),guardarDatos(),reset_navegacion(canvasContenido.timeline.position,canvasContenido.timeline.duration),actualizaTemasTerminados()}function paginaAnterior(){this.libre&&this.habilitar_deshabilitar_btns(getBtnArray(this.btnAtras,btnSiguiente),"h","paginaAnterior"),pagActual-1==0&&0===IDActual&&this.habilitar_deshabilitar_btns(getBtnArray(this.btnAtras),"d","paginaAnterior"),pagActual-=1,canvasContenido.gotoAndStop(pagActual),reset_navegacion(canvasContenido.timeline.position,canvasContenido.timeline.duration),actualizaTemasTerminados()}function siguienteTema(){ir(_root.IDActual+1)}function temaAnterior(){ir(IDActual-1),controlAtras=!0,currentPagina=ULTIMO-1,actualizaTemasTerminados()}function actualizarNavegacion(a,e){pagActual=a,numPags=e}debug&&(console.log("el navegador usado y la version son"),console.log(getBrowserInfo()),console.log(getBrowserInfo().split(" ")[0])),window.Cargar_Sim=function(a,e,t){debug&&console.log("cargar Sim"),setEdo_botones(),this.habilitar_deshabilitar_btns(this.getBtnArray(this.btnAtras,this.btnSiguiente,this.btnCerrar),"d","Cargar_Sim"),estadoSim=!0,$("#div_contenido").hide(),$("#div_sim").fadeIn(),document.getElementById("sim").src=a,debug&&console.log("Fin cargar Sim"),LastMCVid=t,e&&(VidLast=!0)},window.cargar_video=function(a,e,t){debug&&console.log("cargar video"),setEdo_botones(),this.habilitar_deshabilitar_btns(this.getBtnArray(this.btnAtras,this.btnSiguiente,this.btnCerrar),"d","cargar_video"),LastMCVid=t,estadoSim=!0,$("#div_contenido").hide(),$("#div_vid").fadeIn();var n=document.getElementById("vid");n.src=a,n.onended=function(){debug&&console.log("finalizo? desde start "+e),this.habilitar_deshabilitar_btns(getBtnArray(this.btnCerrar),"h","Cargar_Sim"),e&&(VidLast=!0)},debug&&console.log("Fin cargar video")},window.onkeyup=function(a){17==a.keyCode&&(console.log("CONTROL UP"),validar_control=!1),16==a.keyCode&&(console.log("SHIFT UP"),validar_shift=!1)},window.onkeydown=function(a){17==a.keyCode&&(console.log("CONTROL"),validar_control=!0),16==a.keyCode&&1==validar_control&&(console.log("SHIFT"),validar_shift=!0),32==a.keyCode&&1==validar_control&&1==validar_shift&&llamarAlertas("backdoor")};var sumaPag=0;function reset_navegacion(a,e){stopAlertas(),pagActual=a,numPags=e,this.habilitar_deshabilitar_btns(getBtnArray(this.btnSiguiente),"d","reset_navegacion"),0==pagActual&&0==IDActual?this.habilitar_deshabilitar_btns(getBtnArray(this.btnAtras),"d","reset_navegacion"):this.habilitar_deshabilitar_btns(getBtnArray(this.btnAtras),"h","reset_navegacion"),(ULTIMO>currentPagina||libre)&&this.habilitar_deshabilitar_btns(getBtnArray(this.btnSiguiente),"h","reset_navegacion"),backdoor&&this.habilitar_deshabilitar_btns(getBtnArray(this.btnAtras,this.btnSiguiente),"h","reset_navegacion"),guardarDatos()}function cursoCompletado(){let a=!0;for(let e=0;e<this.TRAK.length;e++)if(TRAK[e]<2){a=!1;break}return a}function actualizar_menuHTML(a){for(let o=0;o<a.length;o++){$("#"+o).find("i");var e=$("#"+(o+1));n(e,a[o]),o>0&&a[o-1]>=2||Temaslibre?(debug&&console.log("desbloqueo Tema: "+o),t(e)):o>0&&(debug&&console.log("tema +"+o+"bloqueado"),e.addClass("menuTemaDisabled")),0==TRAK[e.attr("id")-1]?e.addClass("tituloTemaMenuNoIniciado"):e.removeClass("tituloTemaMenuNoIniciado")}function t(a){a.removeClass("menuTemaDisabled"),a.addClass("menuTemaDesbloqueado")}function n(a,e){let t=a.find("i");switch(e){case 0:break;case 1:t.removeClass("menuIconStyle").addClass("menuIconStyleIniciado");break;case 2:t.removeClass("menuIconStyleIniciado").addClass("menuIconStyleCompletado")}}}